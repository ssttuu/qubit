syntax = "proto3";

package protos;

service Compute {
    rpc Render (RenderRequest) returns (RenderResponse) {}
}

message RenderRequest {
    string sceneId = 1;
    string nodeId = 2;
    BoundingBox boundingBox = 3;
}

message RenderResponse {
    ImagePlane imagePlane = 1;
}

// Image

message ImageFrame {
    repeated string labels = 1;
    repeated ImagePlane imagePlanes = 2;
}

message ImagePlane {
    int64 width = 1;
    int64 height = 2;
    repeated string labels = 3;
    repeated ImageComponent components = 4;
}

message ImageComponent {
    repeated Row rows = 4;
}

message Row {
    repeated double data = 1 [packed=true];
}


// Node

message Node {
    string id = 1;
//    string type = 2;
}

// Parameter

message Component {
    string label = 1;
    double value = 2;
}

message Parameter {
    string name = 1;
    repeated Component components = 2;
}

// BoundingBox
message BoundingBox {
    int64 start_x = 1;
    int64 start_y = 2;
    int64 end_x = 3;
    int64 end_y = 4;
}

// Scene
message Scene {
    string id = 1;
}
